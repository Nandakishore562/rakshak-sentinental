/* ══════════════════════════════════════════════════════════
   RAKSHAK SENTINEL — Design System
   Deep Navy + Neon Amber | Glassmorphic | High-Tech
   ══════════════════════════════════════════════════════════ */
:root {
  --navy-900: #050816; --navy-800: #0a0e27; --navy-700: #0f1535;
  --navy-600: #141b42; --navy-500: #1a2255; --navy-400: #252e6a;
  --amber-500: #ffb800; --amber-400: #ffc933; --amber-300: #ffd966;
  --amber-200: #ffe599;
  --amber-glow: rgba(255,184,0,0.35);
  --amber-glow-soft: rgba(255,184,0,0.12);
  --red-500: #ff4757; --red-glow: rgba(255,71,87,0.3);
  --green-500: #2ed573; --green-glow: rgba(46,213,115,0.3);
  --blue-500: #3b82f6;
  --white: #fff; --gray-100: #f1f5f9; --gray-200: #e2e8f0;
  --gray-300: #cbd5e1; --gray-400: #94a3b8; --gray-500: #64748b;
  --glass-bg: rgba(15,21,53,0.65);
  --glass-bg-solid: rgba(10,14,39,0.85);
  --glass-border: rgba(255,184,0,0.15);
  --glass-border-hover: rgba(255,184,0,0.35);
  --glass-blur: 18px;
  --font-body: 'Inter', sans-serif;
  --font-display: 'Orbitron', monospace;
  --font-mono: 'JetBrains Mono', monospace;
  --gap: 16px; --radius: 14px; --radius-sm: 8px; --radius-xs: 5px;
  --ease: cubic-bezier(0.4,0,0.2,1); --duration: 0.25s;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:14px;scroll-behavior:smooth}
body{font-family:var(--font-body);background:var(--navy-900);color:var(--gray-200);min-height:100vh;display:flex;flex-direction:column;overflow-x:hidden;line-height:1.6}
body::before{content:'';position:fixed;inset:0;background:linear-gradient(rgba(255,184,0,0.03) 1px,transparent 1px),linear-gradient(90deg,rgba(255,184,0,0.03) 1px,transparent 1px);background-size:60px 60px;pointer-events:none;z-index:0}
body::after{content:'';position:fixed;top:-30%;left:50%;transform:translateX(-50%);width:120vw;height:70vh;background:radial-gradient(ellipse,rgba(255,184,0,0.06) 0%,transparent 70%);pointer-events:none;z-index:0}
::-webkit-scrollbar{width:6px;height:6px}::-webkit-scrollbar-track{background:var(--navy-800)}::-webkit-scrollbar-thumb{background:var(--navy-500);border-radius:10px}::-webkit-scrollbar-thumb:hover{background:var(--amber-500)}

/* HEADER */
#app-header{position:relative;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:12px 24px;background:var(--glass-bg-solid);border-bottom:1px solid var(--glass-border);backdrop-filter:blur(var(--glass-blur))}
.header-left{display:flex;align-items:center;gap:14px}
.logo-mark{animation:logoPulse 3s ease-in-out infinite;filter:drop-shadow(0 0 8px var(--amber-glow))}
@keyframes logoPulse{0%,100%{transform:scale(1);opacity:1}50%{transform:scale(1.08);opacity:.85}}
.brand-name{font-family:var(--font-display);font-weight:900;font-size:1.35rem;letter-spacing:3px;background:linear-gradient(135deg,var(--amber-500),var(--amber-300));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.tagline{font-size:.72rem;color:var(--gray-400);letter-spacing:2px;text-transform:uppercase;font-weight:500}
.header-center{display:flex;align-items:center;gap:10px}
.status-pill{display:flex;align-items:center;gap:6px;padding:5px 14px;border-radius:50px;font-size:.72rem;font-weight:500;background:rgba(255,255,255,0.04);border:1px solid rgba(255,255,255,0.08);color:var(--gray-300);letter-spacing:.5px}
.status-pill.live{background:rgba(46,213,115,0.1);border-color:rgba(46,213,115,0.3);color:var(--green-500)}
.pulse-dot{width:7px;height:7px;border-radius:50%;background:var(--green-500);box-shadow:0 0 8px var(--green-glow);animation:pulseDot 2s ease-in-out infinite}
@keyframes pulseDot{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.4;transform:scale(.75)}}
.icon-sm{width:15px;height:15px}.icon-xs{width:13px;height:13px}
.header-right{display:flex;align-items:center;gap:12px}
.timestamp{font-family:var(--font-mono);font-size:.78rem;color:var(--gray-400);letter-spacing:.5px}
.btn-icon{width:36px;height:36px;border-radius:10px;border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.04);color:var(--gray-400);cursor:pointer;display:grid;place-items:center;transition:all var(--duration) var(--ease)}
.btn-icon i{width:16px;height:16px}
.btn-icon:hover{border-color:var(--amber-500);color:var(--amber-500);background:var(--amber-glow-soft)}

/* MAIN GRID */
#app-grid{position:relative;z-index:1;flex:1;display:grid;grid-template-columns:1fr 1.3fr 1fr;gap:var(--gap);padding:var(--gap) 20px;overflow:hidden}

/* GLASS CARD */
.glass-card{background:var(--glass-bg);border:1px solid var(--glass-border);border-radius:var(--radius);backdrop-filter:blur(var(--glass-blur));display:flex;flex-direction:column;overflow:hidden;transition:border-color var(--duration) var(--ease),box-shadow var(--duration) var(--ease)}
.glass-card:hover{border-color:var(--glass-border-hover);box-shadow:0 0 30px rgba(255,184,0,0.06),inset 0 0 30px rgba(255,184,0,0.02)}
.glass-card-inner{background:rgba(10,14,39,0.75);border:1px solid var(--glass-border);border-radius:var(--radius-sm);backdrop-filter:blur(12px)}

/* PANEL HEADER */
.panel-header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,0.05)}
.panel-title-group{display:flex;align-items:center;gap:10px}
.panel-icon{width:20px;height:20px;color:var(--amber-500);filter:drop-shadow(0 0 4px var(--amber-glow))}
.panel-header h2{font-family:var(--font-display);font-size:.85rem;font-weight:700;letter-spacing:1.5px;color:var(--white)}
.badge{font-size:.65rem;font-weight:600;letter-spacing:.8px;padding:3px 10px;border-radius:50px;text-transform:uppercase}
.badge-amber{background:rgba(255,184,0,0.12);color:var(--amber-400);border:1px solid rgba(255,184,0,0.25)}
.badge-green{background:rgba(46,213,115,0.12);color:var(--green-500);border:1px solid rgba(46,213,115,0.25)}

/* BUTTONS */
.btn,.btn-sm{display:inline-flex;align-items:center;gap:6px;font-family:var(--font-body);font-weight:600;border:none;cursor:pointer;transition:all var(--duration) var(--ease);letter-spacing:.5px}
.btn{padding:9px 18px;border-radius:var(--radius-sm);font-size:.78rem}
.btn-sm{padding:5px 12px;border-radius:var(--radius-xs);font-size:.7rem}
.btn-amber{background:linear-gradient(135deg,var(--amber-500),#e6a600);color:var(--navy-900);box-shadow:0 4px 15px var(--amber-glow)}
.btn-amber:hover{transform:translateY(-1px);box-shadow:0 6px 25px var(--amber-glow)}
.btn-outline{background:transparent;border:1px solid rgba(255,255,255,0.12);color:var(--gray-300)}
.btn-outline:hover{border-color:var(--amber-500);color:var(--amber-400);background:var(--amber-glow-soft)}
.btn-outline.active,.btn-sm.active{border-color:var(--amber-500);color:var(--amber-500);background:var(--amber-glow-soft)}
/* UPLOAD ZONE */
.upload-zone{flex:1;margin:14px;border:2px dashed rgba(255,184,0,0.25);border-radius:var(--radius);display:flex;align-items:center;justify-content:center;position:relative;overflow:hidden;transition:all var(--duration) var(--ease);min-height:200px;background:rgba(255,184,0,0.02)}
.upload-zone.drag-over{border-color:var(--amber-500);background:rgba(255,184,0,0.06);box-shadow:inset 0 0 40px var(--amber-glow-soft)}
.upload-placeholder{text-align:center;padding:24px}
.upload-icon-ring{width:64px;height:64px;border-radius:50%;border:2px solid rgba(255,184,0,0.2);display:grid;place-items:center;margin:0 auto 14px;background:rgba(255,184,0,0.05);animation:ringFloat 4s ease-in-out infinite}
@keyframes ringFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
.upload-icon{width:28px;height:28px;color:var(--amber-500)}
.upload-text{font-weight:600;color:var(--gray-200);margin-bottom:4px}
.upload-sub{font-size:.8rem;color:var(--gray-500)}
.upload-link{color:var(--amber-400);cursor:pointer;text-decoration:underline;text-underline-offset:2px}
.upload-formats{font-size:.7rem;color:var(--gray-500);margin-top:8px}
.canvas-wrapper{position:relative;width:100%;height:100%}
.canvas-wrapper canvas{width:100%;height:100%;object-fit:contain;display:block}
.detection-overlay-info{position:absolute;top:10px;left:10px;display:flex;flex-direction:column;gap:4px}
.detection-results{padding:14px 18px;border-top:1px solid rgba(255,255,255,0.05)}
.result-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}
.result-header h3{font-size:.82rem;font-weight:600;color:var(--white)}
.result-cards{display:grid;grid-template-columns:repeat(3,1fr);gap:8px;margin-bottom:12px}
.result-card-item{background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);border-radius:var(--radius-sm);padding:10px;text-align:center}
.result-card-item .rc-value{font-family:var(--font-display);font-size:1.2rem;font-weight:700;color:var(--amber-500)}
.result-card-item .rc-label{font-size:.65rem;color:var(--gray-500);margin-top:2px;text-transform:uppercase;letter-spacing:.5px}
.severity-bar{height:6px;background:rgba(255,255,255,0.06);border-radius:10px;overflow:hidden;margin-top:6px}
.severity-fill{height:100%;border-radius:10px;transition:width 1s var(--ease);background:linear-gradient(90deg,var(--green-500),var(--amber-500),var(--red-500))}
.severity-label{font-size:.72rem;color:var(--gray-400);margin-top:6px;text-align:right}
.sample-strip{padding:10px 18px 14px;border-top:1px solid rgba(255,255,255,0.05);display:flex;align-items:center;gap:10px}
.sample-label{font-size:.7rem;color:var(--gray-500);white-space:nowrap}
.sample-thumbs{display:flex;gap:6px;flex-wrap:wrap}
.sample-btn{padding:4px 10px;border-radius:var(--radius-xs);border:1px solid rgba(255,255,255,0.08);background:rgba(255,255,255,0.03);color:var(--gray-400);font-size:.68rem;cursor:pointer;transition:all var(--duration) var(--ease)}
.sample-btn:hover{border-color:var(--amber-500);color:var(--amber-400);background:var(--amber-glow-soft)}

/* MAP */
.map-container{flex:1;position:relative;margin:14px;border-radius:var(--radius-sm);overflow:hidden;min-height:300px}
#leaflet-map{width:100%;height:100%;border-radius:var(--radius-sm)}
.leaflet-tile-pane{filter:brightness(0.7) contrast(1.1) saturate(0.3) hue-rotate(180deg)}
.leaflet-container{background:var(--navy-800)!important}
.map-controls{display:flex;gap:6px}
.map-legend{position:absolute;bottom:12px;left:12px;z-index:1000;padding:10px 14px;font-size:.7rem}
.map-legend h4{font-size:.68rem;margin-bottom:6px;color:var(--gray-300);font-weight:600;letter-spacing:.5px}
.legend-scale{display:flex;align-items:center;gap:8px}
.legend-low{color:var(--green-500);font-size:.65rem}
.legend-high{color:var(--red-500);font-size:.65rem}
.legend-gradient{flex:1;height:5px;border-radius:10px;background:linear-gradient(90deg,var(--green-500),var(--amber-500),var(--red-500));min-width:80px}
.map-stats{display:flex;flex-wrap:wrap;gap:8px;padding:10px 18px 14px;border-top:1px solid rgba(255,255,255,0.05)}
.stat-chip{display:flex;align-items:center;gap:5px;padding:5px 11px;border-radius:50px;background:rgba(255,255,255,0.03);border:1px solid rgba(255,255,255,0.06);font-size:.7rem;color:var(--gray-400)}
.stat-chip strong{color:var(--amber-400);font-weight:700}
.stat-chip i{color:var(--amber-500)}

/* LETTER EDITOR */
.template-selector{padding:12px 18px}
.field-label{display:block;font-size:.7rem;font-weight:600;color:var(--gray-400);margin-bottom:6px;text-transform:uppercase;letter-spacing:.8px}
.template-btns{display:flex;gap:6px;flex-wrap:wrap}
.template-btn{display:flex;align-items:center;gap:5px;padding:6px 12px;border-radius:var(--radius-xs);border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.03);color:var(--gray-400);font-size:.72rem;font-weight:500;cursor:pointer;transition:all var(--duration) var(--ease)}
.template-btn:hover,.template-btn.active{border-color:var(--amber-500);color:var(--amber-400);background:var(--amber-glow-soft)}
.letter-fields{padding:0 18px 10px}
.field-row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:10px}
.field-group{margin-bottom:8px}
.field-input{width:100%;padding:8px 12px;border-radius:var(--radius-xs);border:1px solid rgba(255,255,255,0.1);background:rgba(255,255,255,0.03);color:var(--gray-200);font-size:.8rem;font-family:var(--font-body);transition:border-color var(--duration) var(--ease);outline:none}
.field-input:focus{border-color:var(--amber-500);box-shadow:0 0 0 3px var(--amber-glow-soft)}
.field-input::placeholder{color:var(--gray-500)}
.editor-wrapper{padding:0 18px;flex:1;display:flex;flex-direction:column;min-height:0}
.editor-toolbar{display:flex;align-items:center;gap:2px;padding:5px 6px;border:1px solid rgba(255,255,255,0.08);border-bottom:none;border-radius:var(--radius-xs) var(--radius-xs) 0 0;background:rgba(255,255,255,0.02)}
.toolbar-btn{width:28px;height:28px;border:none;border-radius:4px;background:transparent;color:var(--gray-400);cursor:pointer;display:grid;place-items:center;font-size:.78rem;transition:all var(--duration) var(--ease)}
.toolbar-btn:hover{background:rgba(255,184,0,0.1);color:var(--amber-400)}
.toolbar-divider{width:1px;height:18px;background:rgba(255,255,255,0.1);margin:0 4px}
.letter-editor{flex:1;min-height:160px;max-height:250px;overflow-y:auto;padding:12px;border:1px solid rgba(255,255,255,0.08);border-radius:0 0 var(--radius-xs) var(--radius-xs);background:rgba(255,255,255,0.02);color:var(--gray-200);font-size:.8rem;line-height:1.7;outline:none}
.letter-editor:focus{border-color:var(--amber-500)}
.letter-actions{display:flex;flex-wrap:wrap;gap:8px;padding:14px 18px;border-top:1px solid rgba(255,255,255,0.05)}

/* FOOTER */
#app-footer{position:relative;z-index:100;display:flex;align-items:center;justify-content:space-between;padding:8px 24px;background:var(--glass-bg-solid);border-top:1px solid var(--glass-border);font-size:.7rem;color:var(--gray-500)}
.footer-left,.footer-center,.footer-right{display:flex;align-items:center;gap:16px}
.footer-item{display:flex;align-items:center;gap:5px}
.footer-item i{color:var(--amber-500)}.footer-item strong{color:var(--amber-400)}

/* TOAST */
.toast{position:fixed;bottom:60px;right:24px;z-index:9999;padding:12px 20px;border-radius:var(--radius-sm);font-size:.8rem;font-weight:500;background:var(--glass-bg-solid);border:1px solid var(--glass-border);backdrop-filter:blur(12px);color:var(--gray-200);box-shadow:0 8px 32px rgba(0,0,0,0.4);animation:toastIn .3s var(--ease),toastOut .3s var(--ease) 2.7s forwards;display:flex;align-items:center;gap:8px}
@keyframes toastIn{from{opacity:0;transform:translateY(20px) scale(.95)}to{opacity:1;transform:translateY(0) scale(1)}}
@keyframes toastOut{from{opacity:1;transform:translateY(0) scale(1)}to{opacity:0;transform:translateY(20px) scale(.95)}}

/* PRINT */
@media print{body *{visibility:hidden}#print-area,#print-area *{visibility:visible}#print-area{position:absolute;left:0;top:0;width:100%;padding:40px;color:#000;font-size:12pt;line-height:1.8;background:#fff}.print-only{display:block!important}}
.print-only{display:none}

/* RESPONSIVE */
@media(max-width:1200px){#app-grid{grid-template-columns:1fr 1fr}#panel-heatmap{grid-column:span 2;order:-1}}
@media(max-width:768px){#app-grid{grid-template-columns:1fr}#panel-heatmap{grid-column:span 1}#app-header{flex-wrap:wrap;gap:10px}.header-center{display:none}}

.bbox-tag{position:absolute;font-family:var(--font-mono);font-size:.62rem;font-weight:500;padding:2px 6px;border-radius:3px;white-space:nowrap;pointer-events:none;z-index:10}
